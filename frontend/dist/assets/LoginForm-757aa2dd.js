import{g as S,f as P,r,j as s,i as k}from"./index-c193dc40.js";import{P as L}from"./PasswordFormControl-4c18b887.js";import{R as v}from"./RequestResultAlert-5538ea88.js";import{F as y,a as t,b as c}from"./Form-19731f2f.js";import{F as C}from"./FormControl-cc700203.js";import{B as l}from"./Button-b8db3fe4.js";const T=({onToggleClick:m,onLogin:d})=>{const{sendJsonRequest:u}=S(),{authenticate:x,updateUser:p,deviceId:h}=P(),[o,j]=r.useState(""),[a,f]=r.useState(""),[g,n]=r.useState([]),[F,i]=r.useState(!1),w=async e=>{e.preventDefault(),i(!0),await b(),i(!1)},b=async()=>{n([]);const e=await u("/Auth/Login","POST",{email:o,password:a,deviceId:h});e&&e.accessToken&&e.user&&e.expiresIn?(x(e.accessToken,e.expiresIn),p(e.user),d()):n(e.error)};return s.jsxs(s.Fragment,{children:[s.jsx("h1",{className:"text-center mb-4",children:"Sign In"}),s.jsxs(y,{onSubmit:e=>w(e),children:[s.jsx(v,{errors:g}),s.jsxs(t,{children:[s.jsx(c,{children:"Email"}),s.jsx(C,{type:"email",required:!0,value:o,onChange:e=>j(e.target.value)})]}),s.jsxs(t,{children:[s.jsx(c,{children:"Password"}),s.jsx(L,{password:a,setPassword:f})]}),s.jsx(t,{className:"d-flex justify-content-end",children:s.jsx(k,{to:"/Users/Forgot-Password",children:"Forgot Password?"})}),s.jsx(l,{className:"mt-2 w-100 d-block",type:"submit",disabled:F,children:"Sign in"})]}),s.jsxs("p",{className:"text-center mt-5",children:["New to Webler? ",s.jsx(l,{variant:"link",onClick:m,children:"Create an account"})]})]})};export{T as L};
