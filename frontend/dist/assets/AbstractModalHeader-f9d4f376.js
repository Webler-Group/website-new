import{o as z,d as J,b as Q,l as P}from"./useMergedRefs-f5c2a768.js";import{b as S,e as U,u as ye,d as Ce,c as $}from"./useWindow-763af26a.js";import{r as i,j as u,m as Me}from"./index-b2f3d98e.js";import{u as h}from"./Anchor-1fe32030.js";import{s as p,C as Oe}from"./CloseButton-439f23fc.js";import{d as we,q as E}from"./DataKey-e12315fd.js";function ke(t){var e=i.useRef(t);return e.current=t,e}function Ne(t){var e=ke(t);i.useEffect(function(){return function(){return e.current()}},[])}function A(t){t===void 0&&(t=z());try{var e=t.activeElement;return!e||!e.nodeName?null:e}catch{return t.body}}function Ae(t=document){const e=t.defaultView;return Math.abs(e.innerWidth-t.documentElement.clientWidth)}const X=we("modal-open");class Be{constructor({ownerDocument:e,handleContainerOverflow:n=!0,isRTL:r=!1}={}){this.handleContainerOverflow=n,this.isRTL=r,this.modals=[],this.ownerDocument=e}getScrollbarWidth(){return Ae(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(e){}removeModalAttributes(e){}setContainerStyle(e){const n={overflow:"hidden"},r=this.isRTL?"paddingLeft":"paddingRight",s=this.getElement();e.style={overflow:s.style.overflow,[r]:s.style[r]},e.scrollBarWidth&&(n[r]=`${parseInt(p(s,r)||"0",10)+e.scrollBarWidth}px`),s.setAttribute(X,""),p(s,n)}reset(){[...this.modals].forEach(e=>this.remove(e))}removeContainerStyle(e){const n=this.getElement();n.removeAttribute(X),Object.assign(n.style,e.style)}add(e){let n=this.modals.indexOf(e);return n!==-1||(n=this.modals.length,this.modals.push(e),this.setModalAttributes(e),n!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),n}remove(e){const n=this.modals.indexOf(e);n!==-1&&(this.modals.splice(n,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(e))}isTopModal(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e}}const D=Be,B=(t,e)=>J?t==null?(e||z()).body:(typeof t=="function"&&(t=t()),t&&"current"in t&&(t=t.current),t&&("nodeType"in t||t.getBoundingClientRect)?t:null):null;function je(t,e){const n=S(),[r,s]=i.useState(()=>B(t,n==null?void 0:n.document));if(!r){const o=B(t);o&&s(o)}return i.useEffect(()=>{e&&r&&e(r)},[e,r]),i.useEffect(()=>{const o=B(t);o!==r&&s(o)},[t,r]),r}function Le({children:t,in:e,onExited:n,mountOnEnter:r,unmountOnExit:s}){const o=i.useRef(null),d=i.useRef(e),f=h(n);i.useEffect(()=>{e?d.current=!0:f(o.current)},[e,f]);const g=Q(o,t.ref),c=i.cloneElement(t,{ref:g});return e?c:s||!d.current&&r?null:c}function Se({in:t,onTransition:e}){const n=i.useRef(null),r=i.useRef(!0),s=h(e);return U(()=>{if(!n.current)return;let o=!1;return s({in:t,element:n.current,initial:r.current,isStale:()=>o}),()=>{o=!0}},[t,s]),U(()=>(r.current=!1,()=>{r.current=!0}),[]),n}function De({children:t,in:e,onExited:n,onEntered:r,transition:s}){const[o,d]=i.useState(!e);e&&o&&d(!1);const f=Se({in:!!e,onTransition:c=>{const b=()=>{c.isStale()||(c.in?r==null||r(c.element,c.initial):(d(!0),n==null||n(c.element)))};Promise.resolve(s(c)).then(b,y=>{throw c.in||d(!0),y})}}),g=Q(f,t.ref);return o&&!e?null:i.cloneElement(t,{ref:g})}function Y(t,e,n){return t?u.jsx(t,Object.assign({},n)):e?u.jsx(De,Object.assign({},n,{transition:e})):u.jsx(Le,Object.assign({},n))}function Fe(t){return t.code==="Escape"||t.keyCode===27}const We=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function Ie(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}let j;function _e(t){return j||(j=new D({ownerDocument:t==null?void 0:t.document})),j}function Ke(t){const e=S(),n=t||_e(e),r=i.useRef({dialog:null,backdrop:null});return Object.assign(r.current,{add:()=>n.add(r.current),remove:()=>n.remove(r.current),isTopModal:()=>n.isTopModal(r.current),setDialogRef:i.useCallback(s=>{r.current.dialog=s},[]),setBackdropRef:i.useCallback(s=>{r.current.backdrop=s},[])})}const Z=i.forwardRef((t,e)=>{let{show:n=!1,role:r="dialog",className:s,style:o,children:d,backdrop:f=!0,keyboard:g=!0,onBackdropClick:c,onEscapeKeyDown:b,transition:y,runTransition:te,backdropTransition:ne,runBackdropTransition:re,autoFocus:se=!0,enforceFocus:oe=!0,restoreFocus:ie=!0,restoreFocusOptions:ae,renderDialog:F,renderBackdrop:le=a=>u.jsx("div",Object.assign({},a)),manager:ce,container:ue,onShow:W,onHide:I=()=>{},onExit:de,onExited:_,onExiting:fe,onEnter:he,onEntering:ge,onEntered:me}=t,Ee=Ie(t,We);const m=S(),R=je(ue),l=Ke(ce),ve=ye(),pe=Ce(n),[C,K]=i.useState(!n),x=i.useRef(null);i.useImperativeHandle(e,()=>l,[l]),J&&!pe&&n&&(x.current=A(m==null?void 0:m.document)),n&&C&&K(!1);const H=h(()=>{if(l.add(),w.current=P(document,"keydown",xe),O.current=P(document,"focus",()=>setTimeout(be),!0),W&&W(),se){var a,G;const N=A((a=(G=l.dialog)==null?void 0:G.ownerDocument)!=null?a:m==null?void 0:m.document);l.dialog&&N&&!$(l.dialog,N)&&(x.current=N,l.dialog.focus())}}),M=h(()=>{if(l.remove(),w.current==null||w.current(),O.current==null||O.current(),ie){var a;(a=x.current)==null||a.focus==null||a.focus(ae),x.current=null}});i.useEffect(()=>{!n||!R||H()},[n,R,H]),i.useEffect(()=>{C&&M()},[C,M]),Ne(()=>{M()});const be=h(()=>{if(!oe||!ve()||!l.isTopModal())return;const a=A(m==null?void 0:m.document);l.dialog&&a&&!$(l.dialog,a)&&l.dialog.focus()}),Re=h(a=>{a.target===a.currentTarget&&(c==null||c(a),f===!0&&I())}),xe=h(a=>{g&&Fe(a)&&l.isTopModal()&&(b==null||b(a),a.defaultPrevented||I())}),O=i.useRef(),w=i.useRef(),Te=(...a)=>{K(!0),_==null||_(...a)};if(!R)return null;const V=Object.assign({role:r,ref:l.setDialogRef,"aria-modal":r==="dialog"?!0:void 0},Ee,{style:o,className:s,tabIndex:-1});let k=F?F(V):u.jsx("div",Object.assign({},V,{children:i.cloneElement(d,{role:"document"})}));k=Y(y,te,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!n,onExit:de,onExiting:fe,onExited:Te,onEnter:he,onEntering:ge,onEntered:me,children:k});let T=null;return f&&(T=le({ref:l.setBackdropRef,onClick:Re}),T=Y(ne,re,{in:!!n,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:T})),u.jsx(u.Fragment,{children:Me.createPortal(u.jsxs(u.Fragment,{children:[T,k]}),R)})});Z.displayName="Modal";const Ze=Object.assign(Z,{Manager:D});function He(t,e){return t.classList?!!e&&t.classList.contains(e):(" "+(t.className.baseVal||t.className)+" ").indexOf(" "+e+" ")!==-1}function Ve(t,e){t.classList?t.classList.add(e):He(t,e)||(typeof t.className=="string"?t.className=t.className+" "+e:t.setAttribute("class",(t.className&&t.className.baseVal||"")+" "+e))}function q(t,e){return t.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function Ge(t,e){t.classList?t.classList.remove(e):typeof t.className=="string"?t.className=q(t.className,e):t.setAttribute("class",q(t.className&&t.className.baseVal||"",e))}const v={FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"};class ee extends D{adjustAndStore(e,n,r){const s=n.style[e];n.dataset[e]=s,p(n,{[e]:`${parseFloat(p(n,e))+r}px`})}restore(e,n){const r=n.dataset[e];r!==void 0&&(delete n.dataset[e],p(n,{[e]:r}))}setContainerStyle(e){super.setContainerStyle(e);const n=this.getElement();if(Ve(n,"modal-open"),!e.scrollBarWidth)return;const r=this.isRTL?"paddingLeft":"paddingRight",s=this.isRTL?"marginLeft":"marginRight";E(n,v.FIXED_CONTENT).forEach(o=>this.adjustAndStore(r,o,e.scrollBarWidth)),E(n,v.STICKY_CONTENT).forEach(o=>this.adjustAndStore(s,o,-e.scrollBarWidth)),E(n,v.NAVBAR_TOGGLER).forEach(o=>this.adjustAndStore(s,o,e.scrollBarWidth))}removeContainerStyle(e){super.removeContainerStyle(e);const n=this.getElement();Ge(n,"modal-open");const r=this.isRTL?"paddingLeft":"paddingRight",s=this.isRTL?"marginLeft":"marginRight";E(n,v.FIXED_CONTENT).forEach(o=>this.restore(r,o)),E(n,v.STICKY_CONTENT).forEach(o=>this.restore(s,o)),E(n,v.NAVBAR_TOGGLER).forEach(o=>this.restore(s,o))}}let L;function et(t){return L||(L=new ee(t)),L}const tt=ee,Pe=i.createContext({onHide(){}}),Ue=Pe,$e=i.forwardRef(({closeLabel:t="Close",closeVariant:e,closeButton:n=!1,onHide:r,children:s,...o},d)=>{const f=i.useContext(Ue),g=h(()=>{f==null||f.onHide(),r==null||r()});return u.jsxs("div",{ref:d,...o,children:[s,n&&u.jsx(Oe,{"aria-label":t,variant:e,onClick:g})]})}),nt=$e;export{nt as A,Ze as B,Ue as M,Le as N,tt as a,Ve as b,et as g,Ge as r,Ne as u};
