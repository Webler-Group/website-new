import{g as C,f as A,r,u as E,j as e}from"./index-c193dc40.js";import{r as F}from"./index-99a242c6.js";import{Q as R}from"./Question-5ffe626a.js";import{P as T}from"./react-bootstrap-pagination-control.esm-76fbdeee.js";import{Q as B}from"./QuestionPlaceholder-463c87b6.js";import{T as D}from"./InputTags-0acc8362.js";import{F as L}from"./Form-19731f2f.js";import{B as M}from"./Button-b8db3fe4.js";import"./index-3b750fb9.js";import"./index.esm-70a25315.js";import"./iconBase-11f2ad60.js";import"./DateUtils-1d735d3b.js";import"./index.esm-54ce3fd1.js";import"./ProfileAvatar-bb4fbb5b.js";import"./ThemeProvider-ec2a0fef.js";import"./Anchor-22c8f756.js";import"./Col-6d72f785.js";import"./Badge-8491b435.js";import"./FormControl-cc700203.js";import"./createWithBsPrefix-6b62a92d.js";const oe=()=>{const{sendJsonRequest:y}=C(),{userInfo:a}=A(),[S,P]=r.useState([]),n=10,[l,m]=r.useState(1),[h,Q]=r.useState(0),[q,p]=r.useState(!1),[d,f]=r.useState(1),[c,g]=r.useState(""),[s,u]=E();r.useEffect(()=>{N()},[s]),r.useEffect(()=>{x(1)},[d,c]),r.useEffect(()=>{s.has("page")&&m(Number(s.get("page"))),s.has("filter")&&f(Number(s.get("filter"))),s.has("query")&&g(s.get("query"))},[]);const x=t=>{l!==t&&(s.set("page",t.toString()),u(s,{replace:!0}),m(t))},v=t=>{s.set("query",t),u(s,{replace:!0}),g(t)},N=async()=>{p(!0);const t=s.has("page")?Number(s.get("page")):1,o=s.has("filter")?Number(s.get("filter")):1,b=s.has("query")?s.get("query"):"",i=await y("/Discussion","POST",{page:t,count:n,filter:o,searchQuery:b,userId:a?a.id:null});i&&i.questions&&(P(i.questions),Q(i.count)),p(!1)},w=t=>{const o=Number(t.target.selectedOptions[0].value);s.set("filter",o.toString()),u(s,{replace:!0}),f(o)};let j=[];for(let t=0;t<n;++t)j.push(e.jsx(B,{},t));return e.jsxs("div",{className:"d-flex flex-column",children:[e.jsx("h2",{children:"Q&A Discussions"}),e.jsx("div",{className:"mt-2",children:e.jsx(D,{placeholder:"Search by tags or title...",maxWidthPx:360,query:c,handleSearch:v})}),e.jsxs("div",{className:"mt-2 d-flex justify-content-between",children:[e.jsxs(L.Select,{style:{width:"140px"},size:"sm",value:d,onChange:w,children:[e.jsx("option",{value:"1",children:"Most Recent"}),e.jsx("option",{value:"2",children:"Unanswered"}),e.jsx("option",{value:"6",children:"Trending"}),a&&e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"3",children:"My Questions"}),e.jsx("option",{value:"4",children:"My Answers"})]})]}),e.jsx(F.LinkContainer,{to:"/Discuss/New",children:e.jsx(M,{size:"sm",children:"Ask a question"})})]}),e.jsx("div",{className:"mt-2",children:q?j:h==0?e.jsx("div",{className:"wb-discuss-empty-questions",children:e.jsx("h3",{children:"Nothing to show"})}):S.map(t=>e.jsx(R,{question:t,searchQuery:c,showUserProfile:!0},t.id))}),e.jsx("div",{className:"my-3",children:e.jsx(T,{page:l,between:3,total:h,limit:n,changePage:x,ellipsis:1})})]})};export{oe as default};
