import{j as s,g as w,r as o,f as N}from"./index-c193dc40.js";import{C as b}from"./Course-68254cee.js";import{P as R}from"./PageTitle-98bc1bef.js";import{r as M}from"./index-99a242c6.js";import{D as n,E as S}from"./EllipsisDropdownToggle-442591de.js";import{M as i}from"./Modal-261a0993.js";import{B as p}from"./Button-b8db3fe4.js";import{C as E}from"./Container-f1c6a440.js";import"./index.esm-70a25315.js";import"./iconBase-11f2ad60.js";import"./index-3b750fb9.js";import"./ThemeProvider-ec2a0fef.js";import"./DataKey-e12315fd.js";import"./useMergedRefs-2ac3001c.js";import"./import-955c954a.js";import"./useWindow-822d8a97.js";import"./NavContext-d33865e3.js";import"./Anchor-22c8f756.js";import"./InputGroupContext-b5682b53.js";import"./NavbarContext-9c60203e.js";import"./createWithBsPrefix-6b62a92d.js";import"./AbstractModalHeader-72c903dd.js";import"./CloseButton-710dc957.js";import"./divWithClassName-a88e1404.js";const I=({course:r,onRestart:a})=>{const c=async()=>{a(r.id)};return s.jsx(M.LinkContainer,{to:"/Courses/"+r.code,children:s.jsxs("div",{className:"wb-courses-course-card rounded border p-2 d-sm-flex gap-3 bg-white position-relative",children:[s.jsx("div",{className:"wb-courses-course__edit-button",children:s.jsxs(n,{drop:"start",children:[s.jsx(n.Toggle,{as:S}),s.jsx(n.Menu,{children:s.jsx(n.Item,{onClick:c,children:"Restart"})})]})}),s.jsx("div",{className:"d-flex justify-content-center",children:s.jsx("div",{className:"rounded-circle",children:s.jsx("img",{className:"wb-courses-course__cover-image",src:r.coverImage?"/uploads/courses/"+r.coverImage:"/resources/images/logoicon.svg"})})}),s.jsx("div",{className:"d-flex flex-column align-items-sm-start align-items-center",children:s.jsx("h5",{style:{wordBreak:"break-word"},children:r.title})})]})})},es=({})=>{const{sendJsonRequest:r}=w(),[a,c]=o.useState([]),[u,j]=o.useState([]),[P,m]=o.useState(!1),{userInfo:t}=N(),[f,l]=o.useState(!1),[x,C]=o.useState(null);R("Courses | Webler Codes"),o.useEffect(()=>{g()},[]);const g=async()=>{m(!0);const e=await r("/Courses","POST",{excludeUserId:t==null?void 0:t.id});if(e&&e.courses&&c(e.courses),t){const d=await r("/Courses/GetUserCourses","POST",{userId:t.id});d&&d.courses&&j(d.courses)}m(!1)},h=()=>{l(!1)},v=async()=>{if(!x)return;const e=await r("/Courses/ResetCourseProgress","POST",{courseId:x});e!=null&&e.success,l(!1)},y=e=>{C(e),l(!0)};return s.jsxs(s.Fragment,{children:[s.jsxs(i,{show:f,onHide:h,centered:!0,children:[s.jsx(i.Header,{closeButton:!0,children:s.jsx(i.Title,{children:"Are you sure?"})}),s.jsx(i.Body,{children:"Course progress will be restarted."}),s.jsxs(i.Footer,{children:[s.jsx(p,{variant:"secondary",onClick:h,children:"Cancel"}),s.jsx(p,{variant:"danger",onClick:v,children:"Restart"})]})]}),s.jsx(E,{children:s.jsxs("div",{className:"wb-courses-main p-4",children:[t!==null&&u.length>0&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"d-flex justify-content-center",children:s.jsx("h2",{children:"My Courses"})}),s.jsx("div",{className:"my-3",children:u.map(e=>s.jsx("div",{className:"mt-3",children:s.jsx(I,{course:e,onRestart:y})},e.id))})]}),s.jsx("div",{className:"d-flex justify-content-center",children:s.jsx("h2",{children:"Explore our courses"})}),s.jsx("div",{className:"my-3",children:a.length==0?s.jsx("div",{className:"wb-discuss-empty-questions",children:s.jsx("h3",{children:"Nothing to show"})}):a.map(e=>s.jsx("div",{className:"mt-3",children:s.jsx(b,{course:e,isEditor:!1})},e.id))})]})})]})};export{es as default};
