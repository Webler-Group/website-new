import{P as ne,j as e,C as Ue,o as R,d as We,n as ze,e as Je,f as Ke,r as a,as as Ge,aN as qe,aO as Qe,b as P,T as Ye,B as b,i as $e,aP as Xe,S as Ze,W as es,aC as ss,aG as ts,al as os,aQ as as,l as ns,D as i,E as ls,v as rs,J as is,K as k,af as cs,M as ds,aw as us}from"./index-bd769196.js";import{l as M}from"./Code-4f965cfd.js";import{T as ms}from"./ToggleSwitch-d512bcb8.js";import{t as hs}from"./StringUtils-91be14c5.js";import{C as xs}from"./CommentList-f058700c.js";import{R as ps}from"./ReactionsList-ddf54a52.js";import{u as js,C as gs}from"./useEditorOptions-7ff0d1f1.js";import{M as n}from"./Modal-eaaaa772.js";import{T as oe}from"./Toast-96858330.js";import"./PostAttachment-9e82b15f.js";import"./PostTextareaControl-431043f3.js";import"./PostAttachmentSelect-52cc9483.js";import"./CodeList-f2372f68.js";import"./react-bootstrap-pagination-control.esm-22aecfd0.js";import"./Spinner-f7171b9b.js";import"./Tabs-41ccbce1.js";import"./Tab-9ebe7b0e.js";const fs=()=>(ne("Online Code Editors, Compilers & Playground | Webler Codes"),e.jsx("div",{className:"wb-compiler-playground-wrapper",children:e.jsx("div",{className:"bg-dark text-light",children:e.jsx(Ue,{children:e.jsxs("div",{className:"text-center py-4 position-relative wb-compiler-playground-wrapper",children:[e.jsx("h1",{className:"mt-4",children:"Free online code editor, compiler and playground"}),e.jsx("p",{className:"mt-4",children:"Our free online code editor supports some programming languages. Pick a language to get started!"}),e.jsx("h2",{className:"mt-4",children:"Choose your programming language"}),e.jsx("div",{className:"row row-cols-1 row-cols-sm-2 row-cols-md-3 g-3 mt-2",children:Object.entries(M).map((r,d)=>e.jsx("div",{className:"wb-compiler-playground__language-types__item",children:e.jsx("h3",{style:{borderColor:r[1].color,color:r[1].color},className:"wb-compiler-playground__language-types__language-button",children:e.jsx(R,{to:"/Compiler-Playground/"+r[0],children:r[1].displayName})})},d))})]})})})})),w=[.25,.33,.5,.67,.75,.8,.9,1,1.1,1.25,1.5,1.75,2,2.5,3,4,5],ae=({language:r})=>{var se,te;const{sendJsonRequest:d}=We(),{codeId:p}=ze(),{userInfo:u}=Je(),I=Ke(),[t,j]=a.useState(null),[le,_]=a.useState(!1),[S,y]=a.useState(""),[re,U]=a.useState(!1),[g,T]=a.useState(""),[f,F]=a.useState(""),[C,V]=a.useState(""),[ie,ce]=a.useState(!0),[de,W]=a.useState(!1),[ue,c]=a.useState(!1),[me,z]=a.useState(!1),[he,J]=a.useState(!1),[xe,L]=a.useState(!1),[pe,K]=a.useState(!0),{editorOptions:m,updateEditorOptions:O}=js(),[G,q]=a.useState(0),[je,ge]=a.useState(null),[fe,Ce]=a.useState({section:"Codes",params:{codeId:p}}),v=Ge(),[h,x]=a.useState({success:!0}),[ye,Q]=a.useState(""),[ve,Y]=a.useState(!1),[be,we]=a.useState({parentId:""}),[Se,E]=a.useState(!1),[D,Ne]=a.useState(0);ne(ye),a.useEffect(()=>{t!=null&&t.id?Q(M[t.language].displayName+" Playground - "+t.name+" | Webler Codes"):r&&Q(M[r].displayName+" Playground | Webler Codes")},[r,t]),a.useEffect(()=>{v.state&&v.state.postId?($(),ge({id:v.state.postId,isReply:v.state.isReply})):X()},[v]),a.useEffect(()=>{p?(Ie(),Ce({section:"Codes",params:{codeId:p}})):Te()},[p]),a.useEffect(()=>{const s=o=>{const l=navigator.userAgent.includes("Mac");(l&&o.metaKey&&o.key==="s"||!l&&o.ctrlKey&&o.key==="s")&&(o.preventDefault(),Z())};return window.addEventListener("keydown",s),()=>{window.removeEventListener("keydown",s)}},[t,u,g,f,C]);const Pe=()=>{let s=w.indexOf(m.scale);const o=s===-1?1:w[Math.min(s+1,w.length-1)];O({...m,scale:o})},ke=()=>{let s=w.indexOf(m.scale);const o=s===-1?1:w[Math.max(s-1,0)];O({...m,scale:o})},$=()=>{p&&z(!0)},X=()=>{z(!1)},A=s=>{_(!0),ce(s)},N=()=>{_(!1)},Me=()=>{J(!1)},H=()=>{L(!1)},Ie=async()=>{c(!0);const s=await d("/codes/GetCode","POST",{codeId:p});s&&s.code&&(j(s.code),y(s.code.name),U(s.code.isPublic),T(s.code.source),F(s.code.cssSource),V(s.code.jsSource),q(s.code.comments)),c(!1)},Te=async()=>{const s=await d(`/codes/templates/${r}`,"POST");if(s&&s.template){const o=s.template;j({language:r,isUpvoted:!1,comments:0,votes:0,isPublic:!1}),T(o.source),F(o.cssSource),V(o.jsSource)}},B=async s=>t?await d("/codes/EditCode","PUT",{codeId:t.id,name:S,isPublic:s,source:g,cssSource:f,jsSource:C}):void 0,Fe=(s,o)=>{const l="Created by "+o;switch(s){case"web":return["<!-- "+l+" -->","/* "+l+" */","// "+l];case"c":case"cpp":return["// "+l];case"python":case"ruby":return["# "+l];case"lua":return["-- "+l];default:return[""]}},Ve=async()=>{if(!(!t||!u))if(c(!0),ie){let s=[];t.userId&&t.userId!==u.id&&(s=Fe(t.language,t.userName));const o=await d("/codes/CreateCode","POST",{name:S,language:t.language,source:(s[0]?s[0]+`
`:"")+g,cssSource:(s[1]?s[1]+`
`:"")+f,jsSource:(s[2]?s[2]+`
`:"")+C});o&&o.code?(N(),I("/Compiler-Playground/"+o.code.id,{replace:t.userId===void 0})):x({success:!1,errors:o==null?void 0:o.error}),c(!1)}else{const s=await B(t.isPublic);s&&s.success?(j(o=>({...o,...s.data})),N(),x({success:!0,message:"Code updated successfully"})):x({success:!1,errors:s==null?void 0:s.error}),c(!1)}},Z=async()=>{if(t){if(!u){L(!0);return}if(t.id&&t.userId===u.id){c(!0);const s=await B(t.isPublic);s&&s.success?(j(o=>({...o,...s.data})),x({success:!0,message:"Code updated successfully"})):x({success:!1,errors:s==null?void 0:s.error}),c(!1)}else y(""),A(!0)}},Le=()=>{if(!u){L(!0);return}y(""),A(!0)},Oe=()=>{t&&(y(t.name),A(!1))},ee=()=>{W(!1)},Ee=()=>{Y(!1)},De=s=>{s&&(we({parentId:s}),Y(!0))},Ae=async()=>{if(!t)return;c(!0);const s=await d("/codes/DeleteCode","DELETE",{codeId:t.id});s&&s.success&&I("/Codes?filter=3",{replace:!0}),c(!1)},He=async()=>{if(!t)return;if(!u){I("/Users/Login");return}const s=t.isUpvoted?0:1,o=await d("/Codes/VoteCode","POST",{codeId:t.id,vote:s});o.vote===s?j(l=>l&&{...l,votes:l.votes+(s?1:-1),isUpvoted:s===1}):x({success:!1,errors:o==null?void 0:o.error})},Be=async s=>{c(!0);const o=await B(s);o&&o.success?(j(l=>({...l,...o.data})),U(o.data.isPublic)):x({success:!1,errors:o==null?void 0:o.error}),c(!1)};let Re=g.split(`
`).length+f.split(`
`).length+C.split(`
`).length,_e=g.length+f.length+C.length;return e.jsxs(e.Fragment,{children:[e.jsxs(n,{show:xe,onHide:H,centered:!0,children:[e.jsx(n.Header,{closeButton:!0}),e.jsx(n.Body,{children:pe?e.jsx(qe,{onToggleClick:()=>K(!1),onRegister:H}):e.jsx(Qe,{onToggleClick:()=>K(!0),onLogin:H})})]}),t&&t.id&&e.jsxs(e.Fragment,{children:[e.jsxs(P,{show:me,onHide:X,placement:"end",children:[e.jsx(P.Header,{closeButton:!0,children:e.jsxs(P.Title,{children:[G," Comments"]})}),e.jsx(P.Body,{className:"d-flex flex-column",style:{height:"calc(100% - 62px)"},children:e.jsx(xs,{findPost:je,options:fe,setCommentCount:q})})]}),e.jsxs(n,{show:he,onHide:Me,centered:!0,children:[e.jsx(n.Header,{closeButton:!0,children:e.jsx(n.Title,{children:"Code details"})}),e.jsx(n.Body,{children:e.jsxs("ul",{children:[e.jsxs("li",{children:["Title: ",e.jsx("i",{children:t.name})]}),e.jsxs("li",{children:["Author: ",e.jsx("i",{children:t.userName})]}),e.jsxs("li",{children:["Creation Date: ",e.jsx("i",{children:(se=t.createdAt)==null?void 0:se.split("T")[0]})]}),e.jsxs("li",{children:["Last Changed: ",e.jsx("i",{children:Ye.format(new Date(t.updatedAt))})]}),e.jsxs("li",{children:["Line Count: ",e.jsx("i",{children:Re})]}),e.jsxs("li",{children:["Character Count: ",e.jsx("i",{children:_e})]})]})})]}),e.jsx(ps,{title:"Likes",visible:ve,onClose:Ee,showReactions:!0,countPerPage:10,options:be})]}),e.jsxs(n,{show:de,onHide:ee,centered:!0,children:[e.jsx(n.Header,{closeButton:!0,children:e.jsx(n.Title,{children:"Are you sure?"})}),e.jsx(n.Body,{children:"Your code will be permanently deleted."}),e.jsxs(n.Footer,{children:[e.jsx(b,{variant:"secondary",onClick:ee,children:"Cancel"}),e.jsx(b,{variant:"danger",onClick:Ae,children:"Delete"})]})]}),e.jsxs(n,{show:le,onHide:N,centered:!0,children:[e.jsx(n.Header,{closeButton:!0,children:e.jsx(n.Title,{children:"Save code"})}),e.jsxs(n.Body,{children:[e.jsx("p",{children:"How would you like to name your code?"}),e.jsx($e,{className:"mt-2",type:"text",placeholder:"Unnamed",value:S,onChange:s=>y(s.target.value)})]}),e.jsxs(n.Footer,{children:[e.jsx(b,{variant:"secondary",onClick:N,children:"Cancel"}),e.jsx(b,{variant:"primary",onClick:Ve,disabled:S.length===0,children:"Save"})]})]}),e.jsxs("div",{className:"wb-compiler-playground-container",children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between p-2 border-bottom",style:{height:"44px"},children:[e.jsx("div",{children:e.jsx(R,{to:"/",children:e.jsx("img",{src:"/resources/images/logo.svg",height:"32px",width:"96px",alt:"Webler logo"})})}),e.jsx("div",{children:e.jsx(Xe,{})})]}),e.jsx(oe,{className:"position-absolute bottom-0 end-0 m-2",style:{zIndex:"9999"},bg:h.success?"success":"danger",onClose:()=>x(s=>({success:s.success})),show:h.errors&&h.errors.length>0||!!h.message,delay:1500,autohide:!0,children:e.jsx(oe.Body,{className:"text-white",children:e.jsx("b",{children:h.success?h.message:h.errors?(te=h.errors[0])==null?void 0:te.message:""})})}),t?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between p-1",style:{height:"44px"},children:[e.jsx("div",{className:"d-flex align-items-center",children:t.id&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"d-flex align-items-center gap-2",children:[e.jsx(Ze,{size:32,avatarImage:t.userAvatar}),e.jsxs("div",{children:[e.jsx("div",{children:e.jsx("b",{children:hs(t.name,10)})}),e.jsx("div",{className:"d-flex justify-content-start small",children:e.jsx(es,{userId:t.userId,userName:t.userName})})]})]}),e.jsxs("div",{className:"wb-compiler-playground-voting small",children:[e.jsx("span",{onClick:He,className:"wb-icon-button"+(t.isUpvoted?" text-black":""),children:e.jsx(ss,{})}),e.jsx("span",{style:{cursor:"pointer"},onClick:()=>De(t.id??null),children:t.votes})]}),e.jsxs("div",{className:"wb-compiler-playground-comments small",children:[e.jsx("span",{style:{cursor:"pointer"},onClick:$,children:e.jsx(ts,{})}),e.jsx("span",{children:G})]}),!t.isPublic&&e.jsx("div",{className:"wb-compiler-playground-public small",children:e.jsx(os,{})})]})}),e.jsxs("div",{className:"d-flex gap-2 align-items-center",children:[t.language=="web"&&e.jsxs(b,{size:"sm",variant:"link",className:"text-dark position-relative",onClick:()=>E(!0),children:[e.jsx(as,{}),D>0&&e.jsx(ns,{bg:"danger",pill:!0,className:"position-absolute",children:D>99?"99+":D})]}),e.jsxs(i,{children:[e.jsx(i.Toggle,{as:ls}),e.jsxs(i.Menu,{style:{width:"200px"},children:[e.jsx(i.Item,{onClick:Z,children:"Save"}),e.jsx(i.Item,{onClick:Le,children:"Save As"}),u&&e.jsx(e.Fragment,{children:t&&t.id&&e.jsx(e.Fragment,{children:t.userId==u.id&&e.jsxs(e.Fragment,{children:[e.jsx(i.Item,{onClick:Oe,children:"Rename"}),e.jsx(i.Item,{onClick:()=>W(!0),children:"Delete"}),e.jsxs(i.ItemText,{className:"d-flex justify-content-between align-items-center",children:[e.jsx("span",{children:"Public"}),e.jsx(ms,{value:re,onChange:s=>Be(s.target.checked)})]})]})})}),e.jsxs(i.ItemText,{className:"border-top d-flex justify-content-between",children:[e.jsx("div",{children:"Font"}),e.jsxs("div",{className:"d-flex gap-1",children:[e.jsx("span",{className:"wb-compiler-playground-options__button",onClick:ke,children:"-"}),e.jsxs("span",{className:"d-flex justify-content-center",style:{width:"32px"},children:[(m.scale*100).toFixed(0),"%"]}),e.jsx("span",{className:"wb-compiler-playground-options__button",onClick:Pe,children:"+"})]})]}),e.jsxs(i.ItemText,{className:"border-bottom d-flex justify-content-between",children:[e.jsx("div",{children:"Line Wrap"}),e.jsx("div",{children:e.jsx("input",{type:"checkbox",checked:m.lineWrap,onChange:s=>O({...m,lineWrap:s.target.checked})})})]}),t&&t.id&&e.jsxs(e.Fragment,{children:[e.jsx(i.Item,{onClick:()=>J(!0),children:"Details"}),e.jsx(i.Item,{onClick:()=>{navigator.clipboard.writeText(window.location.href)},children:"Share"})]})]})]})]})]}),e.jsx(gs,{code:t,source:g,setSource:s=>T(s),css:f,setCss:s=>F(s),js:C,setJs:s=>V(s),options:m,tabHeightStyle:"calc(100dvh - 130px)",consoleVisible:Se,hideConsole:()=>E(!1),toggleConsole:()=>E(s=>!s),setLogsCount:Ne})]}):!ue&&e.jsxs("div",{className:"d-flex h-100 flex-column align-items-center justify-content-center text-center",children:[e.jsx("h4",{children:e.jsx(rs,{})}),e.jsx("h5",{children:"Code not found"}),e.jsx("div",{children:e.jsx(R,{to:"/Codes",children:"Go back"})})]})]})]})};const As=()=>e.jsxs(is,{children:[e.jsx(k,{element:e.jsx(cs,{Header:e.jsx(ds,{variant:"light"}),Footer:e.jsx(us,{})}),children:e.jsx(k,{index:!0,element:e.jsx(fs,{})})}),Object.keys(M).map((r,d)=>e.jsx(k,{path:r,element:e.jsx(ae,{language:r})},d)),e.jsx(k,{path:":codeId",element:e.jsx(ae,{language:null})})]});export{As as default};
