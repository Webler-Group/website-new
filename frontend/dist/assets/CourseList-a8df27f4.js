import{j as s,g as w,r as o,f as N}from"./index-b2f3d98e.js";import{C as b}from"./Course-a3d952bd.js";import{P as R}from"./PageTitle-83c92925.js";import{r as M}from"./index-19ddc0d1.js";import{D as a,E as S}from"./EllipsisDropdownToggle-ab206b50.js";import{M as i}from"./Modal-d6b02714.js";import{B as p}from"./Button-a8db19a8.js";import{C as E}from"./Container-aded6eb3.js";import"./index.esm-4a619d62.js";import"./iconBase-7a454df3.js";import"./index-11ee592c.js";import"./ThemeProvider-c318c21f.js";import"./DataKey-e12315fd.js";import"./useMergedRefs-f5c2a768.js";import"./import-c49ebc7f.js";import"./useWindow-763af26a.js";import"./NavContext-f8abb837.js";import"./Anchor-1fe32030.js";import"./InputGroupContext-66571c02.js";import"./NavbarContext-864acb8f.js";import"./createWithBsPrefix-c6deafcc.js";import"./AbstractModalHeader-f9d4f376.js";import"./CloseButton-439f23fc.js";import"./divWithClassName-9b80bbe4.js";const I=({course:r,onRestart:n})=>{const c=async()=>{n(r.id)};return s.jsx(M.LinkContainer,{to:"/Courses/"+r.code,children:s.jsxs("div",{className:"wb-courses-course-card rounded border p-2 d-sm-flex gap-3 bg-white position-relative",children:[s.jsx("div",{className:"wb-courses-course__edit-button",children:s.jsxs(a,{drop:"start",children:[s.jsx(a.Toggle,{as:S}),s.jsx(a.Menu,{children:s.jsx(a.Item,{onClick:c,children:"Restart"})})]})}),s.jsx("div",{className:"d-flex justify-content-center",children:s.jsx("div",{className:"rounded-circle",children:s.jsx("img",{className:"wb-courses-course__cover-image",src:r.coverImage?"/uploads/courses/"+r.coverImage:"/resources/images/logoicon.png"})})}),s.jsx("div",{className:"d-flex flex-column align-items-sm-start align-items-center",children:s.jsx("h5",{style:{wordBreak:"break-word"},children:r.title})})]})})},es=({})=>{const{sendJsonRequest:r}=w(),[n,c]=o.useState([]),[u,j]=o.useState([]),[P,m]=o.useState(!1),{userInfo:t}=N(),[f,l]=o.useState(!1),[x,C]=o.useState(null);R("Courses | Webler Codes"),o.useEffect(()=>{g()},[]);const g=async()=>{m(!0);const e=await r("/Courses","POST",{excludeUserId:t==null?void 0:t.id});if(e&&e.courses&&c(e.courses),t){const d=await r("/Courses/GetUserCourses","POST",{userId:t.id});d&&d.courses&&j(d.courses)}m(!1)},h=()=>{l(!1)},v=async()=>{if(!x)return;const e=await r("/Courses/ResetCourseProgress","POST",{courseId:x});e!=null&&e.success,l(!1)},y=e=>{C(e),l(!0)};return s.jsxs(s.Fragment,{children:[s.jsxs(i,{show:f,onHide:h,centered:!0,children:[s.jsx(i.Header,{closeButton:!0,children:s.jsx(i.Title,{children:"Are you sure?"})}),s.jsx(i.Body,{children:"Course progress will be restarted."}),s.jsxs(i.Footer,{children:[s.jsx(p,{variant:"secondary",onClick:h,children:"Cancel"}),s.jsx(p,{variant:"danger",onClick:v,children:"Restart"})]})]}),s.jsx(E,{children:s.jsxs("div",{className:"wb-courses-main p-4",children:[t!==null&&u.length>0&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"d-flex justify-content-center",children:s.jsx("h2",{children:"My Courses"})}),s.jsx("div",{className:"my-3",children:u.map(e=>s.jsx("div",{className:"mt-3",children:s.jsx(I,{course:e,onRestart:y})},e.id))})]}),s.jsx("div",{className:"d-flex justify-content-center",children:s.jsx("h2",{children:"Explore our courses"})}),s.jsx("div",{className:"my-3",children:n.length==0?s.jsx("div",{className:"wb-discuss-empty-questions",children:s.jsx("h3",{children:"Nothing to show"})}):n.map(e=>s.jsx("div",{className:"mt-3",children:s.jsx(b,{course:e,isEditor:!1})},e.id))})]})})]})};export{es as default};
