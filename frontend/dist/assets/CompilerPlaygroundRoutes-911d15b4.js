import{P as ne,j as e,C as Ue,o as B,d as ze,n as Ke,e as We,f as Je,r as a,ap as Ge,aK as qe,aL as Ye,b as P,M as $e,B as b,i as Qe,aM as Xe,K as Ze,S as es,az as ss,aD as ts,ai as os,aN as as,l as ns,D as c,E as ls,t as rs,z as is,A as k,ac as cs,H as ds,at as us}from"./index-ed6a0f8c.js";import{l as M}from"./Code-0398120c.js";import{T as ms}from"./ToggleSwitch-b090c21d.js";import{t as hs}from"./StringUtils-91be14c5.js";import{C as xs}from"./CommentList-336ed754.js";import{R as ps}from"./ReactionsList-6976534f.js";import{u as js,C as gs}from"./useEditorOptions-3a97ada4.js";import{M as n}from"./Modal-ceebf9cf.js";import{T as oe}from"./Toast-1c51cc77.js";import"./PostAttachment-8cbb10f3.js";import"./PostTextareaControl-ca103577.js";import"./PostAttachmentSelect-de3ceb10.js";import"./CodeList-bfed21b2.js";import"./react-bootstrap-pagination-control.esm-13a4037d.js";import"./Spinner-67e86fed.js";import"./Tabs-6c3d1c14.js";import"./Tab-3dc5ca70.js";const fs=()=>(ne("Online Code Editors, Compilers & Playground | Webler Codes"),e.jsx("div",{className:"wb-compiler-playground-wrapper",children:e.jsx("div",{className:"bg-dark text-light",children:e.jsx(Ue,{children:e.jsxs("div",{className:"text-center py-4 position-relative wb-compiler-playground-wrapper",children:[e.jsx("h1",{className:"mt-4",children:"Free online code editor, compiler and playground"}),e.jsx("p",{className:"mt-4",children:"Our free online code editor supports some programming languages. Pick a language to get started!"}),e.jsx("h2",{className:"mt-4",children:"Choose your programming language"}),e.jsx("div",{className:"row row-cols-1 row-cols-sm-2 row-cols-md-3 g-3 mt-2",children:Object.entries(M).map((r,d)=>e.jsx("div",{className:"wb-compiler-playground__language-types__item",children:e.jsx("h3",{style:{borderColor:r[1].color,color:r[1].color},className:"wb-compiler-playground__language-types__language-button",children:e.jsx(B,{to:"/Compiler-Playground/"+r[0],children:r[1].displayName})})},d))})]})})})})),w=[.25,.33,.5,.67,.75,.8,.9,1,1.1,1.25,1.5,1.75,2,2.5,3,4,5],ae=({language:r})=>{var se,te;const{sendJsonRequest:d}=ze(),{codeId:x}=Ke(),{userInfo:u}=We(),I=Je(),[t,p]=a.useState(null),[le,R]=a.useState(!1),[S,y]=a.useState(""),[re,_]=a.useState(!1),[j,T]=a.useState(""),[g,F]=a.useState(""),[f,V]=a.useState(""),[ie,ce]=a.useState(!0),[de,U]=a.useState(!1),[ue,i]=a.useState(!1),[me,z]=a.useState(!1),[he,K]=a.useState(!1),[xe,L]=a.useState(!1),[pe,W]=a.useState(!0),{editorOptions:C,updateEditorOptions:J}=js(),[G,q]=a.useState(0),[je,ge]=a.useState(null),[fe,Ce]=a.useState({section:"Codes",params:{codeId:x}}),v=Ge(),[m,h]=a.useState({success:!0}),[ye,Y]=a.useState(""),[ve,$]=a.useState(!1),[be,we]=a.useState({parentId:""}),[Se,D]=a.useState(!1),[E,Ne]=a.useState(0);ne(ye),a.useEffect(()=>{t!=null&&t.id?Y(M[t.language].displayName+" Playground - "+t.name+" | Webler Codes"):r&&Y(M[r].displayName+" Playground | Webler Codes")},[r,t]),a.useEffect(()=>{v.state&&v.state.postId?(Q(),ge({id:v.state.postId,isReply:v.state.isReply})):X()},[v]),a.useEffect(()=>{x?(Ie(),Ce({section:"Codes",params:{codeId:x}})):Te()},[x]),a.useEffect(()=>{const s=o=>{const l=navigator.userAgent.includes("Mac");(l&&o.metaKey&&o.key==="s"||!l&&o.ctrlKey&&o.key==="s")&&(o.preventDefault(),Z())};return window.addEventListener("keydown",s),()=>{window.removeEventListener("keydown",s)}},[t,u,j,g,f]);const Pe=()=>{let s=w.indexOf(C.scale);const o=s===-1?1:w[Math.min(s+1,w.length-1)];J({...C,scale:o})},ke=()=>{let s=w.indexOf(C.scale);const o=s===-1?1:w[Math.max(s-1,0)];J({...C,scale:o})},Q=()=>{x&&z(!0)},X=()=>{z(!1)},O=s=>{R(!0),ce(s)},N=()=>{R(!1)},Me=()=>{K(!1)},A=()=>{L(!1)},Ie=async()=>{i(!0);const s=await d("/codes/GetCode","POST",{codeId:x});s&&s.code&&(p(s.code),y(s.code.name),_(s.code.isPublic),T(s.code.source),F(s.code.cssSource),V(s.code.jsSource),q(s.code.comments)),i(!1)},Te=async()=>{const s=await d(`/codes/templates/${r}`,"POST");if(s&&s.template){const o=s.template;p({language:r,isUpvoted:!1,comments:0,votes:0,isPublic:!1}),T(o.source),F(o.cssSource),V(o.jsSource)}},H=async s=>t?await d("/codes/EditCode","PUT",{codeId:t.id,name:S,isPublic:s,source:j,cssSource:g,jsSource:f}):void 0,Fe=(s,o)=>{const l="Created by "+o;switch(s){case"web":return["<!-- "+l+" -->","/* "+l+" */","// "+l];case"c":case"cpp":return["// "+l];case"python":case"ruby":return["# "+l];case"lua":return["-- "+l];default:return[""]}},Ve=async()=>{if(!(!t||!u))if(i(!0),ie){let s=[];t.userId&&t.userId!==u.id&&(s=Fe(t.language,t.userName));const o=await d("/codes/CreateCode","POST",{name:S,language:t.language,source:(s[0]?s[0]+`
`:"")+j,cssSource:(s[1]?s[1]+`
`:"")+g,jsSource:(s[2]?s[2]+`
`:"")+f});o&&o.code?(N(),I("/Compiler-Playground/"+o.code.id,{replace:t.userId===void 0})):h({success:!1,errors:o==null?void 0:o.error}),i(!1)}else{const s=await H(t.isPublic);s&&s.success?(p(o=>({...o,...s.data})),N(),h({success:!0,message:"Code updated successfully"})):h({success:!1,errors:s==null?void 0:s.error}),i(!1)}},Z=async()=>{if(t){if(!u){L(!0);return}if(t.id&&t.userId===u.id){i(!0);const s=await H(t.isPublic);s&&s.success?(p(o=>({...o,...s.data})),h({success:!0,message:"Code updated successfully"})):h({success:!1,errors:s==null?void 0:s.error}),i(!1)}else y(""),O(!0)}},Le=()=>{if(!u){L(!0);return}y(""),O(!0)},De=()=>{t&&(y(t.name),O(!1))},ee=()=>{U(!1)},Ee=()=>{$(!1)},Oe=s=>{s&&(we({parentId:s}),$(!0))},Ae=async()=>{if(!t)return;i(!0);const s=await d("/codes/DeleteCode","DELETE",{codeId:t.id});s&&s.success&&I("/Codes?filter=3",{replace:!0}),i(!1)},He=async()=>{if(!t)return;if(!u){I("/Users/Login");return}const s=t.isUpvoted?0:1,o=await d("/Codes/VoteCode","POST",{codeId:t.id,vote:s});o.vote===s?p(l=>l&&{...l,votes:l.votes+(s?1:-1),isUpvoted:s===1}):h({success:!1,errors:o==null?void 0:o.error})},Be=async s=>{i(!0);const o=await H(s);o&&o.success?(p(l=>({...l,...o.data})),_(o.data.isPublic)):h({success:!1,errors:o==null?void 0:o.error}),i(!1)};let Re=j.split(`
`).length+g.split(`
`).length+f.split(`
`).length,_e=j.length+g.length+f.length;return e.jsxs(e.Fragment,{children:[e.jsxs(n,{show:xe,onHide:A,centered:!0,children:[e.jsx(n.Header,{closeButton:!0}),e.jsx(n.Body,{children:pe?e.jsx(qe,{onToggleClick:()=>W(!1),onRegister:A}):e.jsx(Ye,{onToggleClick:()=>W(!0),onLogin:A})})]}),t&&t.id&&e.jsxs(e.Fragment,{children:[e.jsxs(P,{show:me,onHide:X,placement:"end",children:[e.jsx(P.Header,{closeButton:!0,children:e.jsxs(P.Title,{children:[G," Comments"]})}),e.jsx(P.Body,{className:"d-flex flex-column",style:{height:"calc(100% - 62px)"},children:e.jsx(xs,{findPost:je,options:fe,setCommentCount:q})})]}),e.jsxs(n,{show:he,onHide:Me,centered:!0,children:[e.jsx(n.Header,{closeButton:!0,children:e.jsx(n.Title,{children:"Code details"})}),e.jsx(n.Body,{children:e.jsxs("ul",{children:[e.jsxs("li",{children:["Title: ",e.jsx("i",{children:t.name})]}),e.jsxs("li",{children:["Author: ",e.jsx("i",{children:t.userName})]}),e.jsxs("li",{children:["Creation Date: ",e.jsx("i",{children:(se=t.createdAt)==null?void 0:se.split("T")[0]})]}),e.jsxs("li",{children:["Last Changed: ",e.jsx("i",{children:$e.format(new Date(t.updatedAt))})]}),e.jsxs("li",{children:["Line Count: ",e.jsx("i",{children:Re})]}),e.jsxs("li",{children:["Character Count: ",e.jsx("i",{children:_e})]})]})})]}),e.jsx(ps,{title:"Likes",visible:ve,onClose:Ee,showReactions:!0,countPerPage:10,options:be})]}),e.jsxs(n,{show:de,onHide:ee,centered:!0,children:[e.jsx(n.Header,{closeButton:!0,children:e.jsx(n.Title,{children:"Are you sure?"})}),e.jsx(n.Body,{children:"Your code will be permanently deleted."}),e.jsxs(n.Footer,{children:[e.jsx(b,{variant:"secondary",onClick:ee,children:"Cancel"}),e.jsx(b,{variant:"danger",onClick:Ae,children:"Delete"})]})]}),e.jsxs(n,{show:le,onHide:N,centered:!0,children:[e.jsx(n.Header,{closeButton:!0,children:e.jsx(n.Title,{children:"Save code"})}),e.jsxs(n.Body,{children:[e.jsx("p",{children:"How would you like to name your code?"}),e.jsx(Qe,{className:"mt-2",type:"text",placeholder:"Unnamed",value:S,onChange:s=>y(s.target.value)})]}),e.jsxs(n.Footer,{children:[e.jsx(b,{variant:"secondary",onClick:N,children:"Cancel"}),e.jsx(b,{variant:"primary",onClick:Ve,disabled:S.length===0,children:"Save"})]})]}),e.jsxs("div",{className:"wb-compiler-playground-container",children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between p-2 border-bottom",style:{height:"44px"},children:[e.jsx("div",{children:e.jsx(B,{to:"/",children:e.jsx("img",{src:"/resources/images/logo.svg",height:"32px",width:"96px",alt:"Webler logo"})})}),e.jsx("div",{children:e.jsx(Xe,{})})]}),e.jsx(oe,{className:"position-absolute bottom-0 end-0 m-2",style:{zIndex:"9999"},bg:m.success?"success":"danger",onClose:()=>h(s=>({success:s.success})),show:m.errors&&m.errors.length>0||!!m.message,delay:1500,autohide:!0,children:e.jsx(oe.Body,{className:"text-white",children:e.jsx("b",{children:m.success?m.message:m.errors?(te=m.errors[0])==null?void 0:te.message:""})})}),t?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between p-1",style:{height:"44px"},children:[e.jsx("div",{className:"d-flex align-items-center",children:t.id&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"d-flex align-items-center gap-2",children:[e.jsx(Ze,{size:32,avatarImage:t.userAvatar}),e.jsxs("div",{children:[e.jsx("div",{children:e.jsx("b",{children:hs(t.name,10)})}),e.jsx("div",{className:"d-flex justify-content-start small",children:e.jsx(es,{userId:t.userId,userName:t.userName})})]})]}),e.jsxs("div",{className:"wb-compiler-playground-voting small",children:[e.jsx("span",{onClick:He,className:"wb-icon-button"+(t.isUpvoted?" text-black":""),children:e.jsx(ss,{})}),e.jsx("span",{style:{cursor:"pointer"},onClick:()=>Oe(t.id??null),children:t.votes})]}),e.jsxs("div",{className:"wb-compiler-playground-comments small",children:[e.jsx("span",{style:{cursor:"pointer"},onClick:Q,children:e.jsx(ts,{})}),e.jsx("span",{children:G})]}),!t.isPublic&&e.jsx("div",{className:"wb-compiler-playground-public small",children:e.jsx(os,{})})]})}),e.jsxs("div",{className:"d-flex gap-2 align-items-center",children:[t.language=="web"&&e.jsxs(b,{size:"sm",variant:"link",className:"text-dark position-relative",onClick:()=>D(!0),children:[e.jsx(as,{}),E>0&&e.jsx(ns,{bg:"danger",pill:!0,className:"position-absolute",children:E>99?"99+":E})]}),e.jsxs(c,{children:[e.jsx(c.Toggle,{as:ls}),e.jsxs(c.Menu,{style:{width:"200px"},children:[e.jsx(c.Item,{onClick:Z,children:"Save"}),e.jsx(c.Item,{onClick:Le,children:"Save As"}),u&&e.jsx(e.Fragment,{children:t&&t.id&&e.jsx(e.Fragment,{children:t.userId==u.id&&e.jsxs(e.Fragment,{children:[e.jsx(c.Item,{onClick:De,children:"Rename"}),e.jsx(c.Item,{onClick:()=>U(!0),children:"Delete"}),e.jsxs(c.ItemText,{className:"d-flex justify-content-between align-items-center",children:[e.jsx("span",{children:"Public"}),e.jsx(ms,{value:re,onChange:s=>Be(s.target.checked)})]})]})})}),e.jsxs(c.ItemText,{className:"border d-flex justify-content-between",children:[e.jsx("div",{children:"Font"}),e.jsxs("div",{className:"d-flex gap-1",children:[e.jsx("span",{className:"wb-compiler-playground-options__button",onClick:ke,children:"-"}),e.jsxs("span",{className:"d-flex justify-content-center",style:{width:"32px"},children:[(C.scale*100).toFixed(0),"%"]}),e.jsx("span",{className:"wb-compiler-playground-options__button",onClick:Pe,children:"+"})]})]}),t&&t.id&&e.jsxs(e.Fragment,{children:[e.jsx(c.Item,{onClick:()=>K(!0),children:"Details"}),e.jsx(c.Item,{onClick:()=>{navigator.clipboard.writeText(window.location.href)},children:"Share"})]})]})]})]})]}),e.jsx(gs,{code:t,source:j,setSource:s=>T(s),css:g,setCss:s=>F(s),js:f,setJs:s=>V(s),options:C,tabHeightStyle:"calc(100dvh - 130px)",consoleVisible:Se,hideConsole:()=>D(!1),toggleConsole:()=>D(s=>!s),setLogsCount:Ne})]}):!ue&&e.jsxs("div",{className:"d-flex h-100 flex-column align-items-center justify-content-center text-center",children:[e.jsx("h4",{children:e.jsx(rs,{})}),e.jsx("h5",{children:"Code not found"}),e.jsx("div",{children:e.jsx(B,{to:"/Codes",children:"Go back"})})]})]})]})};const As=()=>e.jsxs(is,{children:[e.jsx(k,{element:e.jsx(cs,{Header:e.jsx(ds,{variant:"light"}),Footer:e.jsx(us,{})}),children:e.jsx(k,{index:!0,element:e.jsx(fs,{})})}),Object.keys(M).map((r,d)=>e.jsx(k,{path:r,element:e.jsx(ae,{language:r})},d)),e.jsx(k,{path:":codeId",element:e.jsx(ae,{language:null})})]});export{As as default};
