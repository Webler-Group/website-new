import{g as N,d as Q,r,j as e}from"./index-b2f3d98e.js";import{I as F}from"./InputTags-66a0d8a7.js";import{r as P}from"./index-19ddc0d1.js";import{P as z}from"./PostTextareaControl-1be45863.js";import{R as A}from"./RequestResultAlert-53291c96.js";import{M as o}from"./Modal-d6b02714.js";import{B as a}from"./Button-a8db19a8.js";import{a as x,b as j}from"./Form-4647d33b.js";import{F as M}from"./FormControl-a036e454.js";import"./index.esm-cb18ecd9.js";import"./iconBase-7a454df3.js";import"./Badge-d192c51b.js";import"./ThemeProvider-c318c21f.js";import"./index-11ee592c.js";import"./UserSearch-78852d36.js";import"./ProfileAvatar-4b9caa46.js";import"./useMergedRefs-f5c2a768.js";import"./Nav-131532f4.js";import"./DataKey-e12315fd.js";import"./NavContext-f8abb837.js";import"./Anchor-1fe32030.js";import"./Alert-f0171b20.js";import"./CloseButton-439f23fc.js";import"./divWithClassName-9b80bbe4.js";import"./createWithBsPrefix-c6deafcc.js";import"./useWindow-763af26a.js";import"./AbstractModalHeader-f9d4f376.js";import"./Col-1c3a04d0.js";const me=({questionId:t})=>{const{sendJsonRequest:n}=N(),u=Q(),[l,f]=r.useState(""),[c,g]=r.useState(""),[d,y]=r.useState([]),[p,i]=r.useState(!1),[w,m]=r.useState(),[C,b]=r.useState(!1);r.useEffect(()=>{t&&k()},[t]);const k=async()=>{i(!0);const s=await n("/Discussion/GetQuestion","POST",{questionId:t});s&&s.question&&(f(s.question.title),g(s.question.message),y(s.question.tags)),i(!1)},v=async()=>{i(!0),m(void 0),t?await S():await T(),i(!1)},T=async()=>{const s=await n("/Discussion/CreateQuestion","POST",{title:l,message:c,tags:d});s&&s.question?u("/Discuss/"+s.question.id):m(s.error)},S=async()=>{const s=await n("/Discussion/EditQuestion","PUT",{questionId:t,title:l,message:c,tags:d});s&&s.success?u("/Discuss/"+t):m(s.error)},h=()=>{b(!1)},E=async()=>{i(!0);const s=await n("/Discussion/DeleteQuestion","DELETE",{questionId:t});s&&s.success?(h(),u("/Discuss?filter=3")):m(s!=null&&s.error?s.error.message:s.message),i(!1)};let D=p||l.trim().length==0||c.trim().length==0;return e.jsxs(e.Fragment,{children:[e.jsxs(o,{show:C,onHide:h,centered:!0,children:[e.jsx(o.Header,{closeButton:!0,children:e.jsx(o.Title,{children:"Are you sure?"})}),e.jsx(o.Body,{children:"Your question will be permanently deleted."}),e.jsxs(o.Footer,{children:[e.jsx(a,{variant:"secondary",onClick:h,children:"Cancel"}),e.jsx(a,{variant:"danger",onClick:E,children:"Delete"})]})]}),t===null&&e.jsx("h2",{className:"mb-4",children:"Ask the community a question"}),e.jsxs("div",{className:"small",children:[e.jsx(A,{errors:w}),e.jsxs(x,{children:[e.jsx(j,{children:"Your question"}),e.jsx(M,{size:"sm",placeholder:"What would you like to know?",type:"text",required:!0,value:l,onChange:s=>f(s.target.value)}),e.jsx("p",{className:"text-secondary",children:"Tip: write as if asking a friend, being as specific as possible"})]}),e.jsxs(x,{children:[e.jsx(j,{children:"Description"}),e.jsx(z,{size:"sm",placeholder:"Include as much detail as possible to get the most relevant answers.",rows:10,maxLength:4096,required:!0,value:c,setValue:g})]}),e.jsxs(x,{children:[e.jsx(j,{children:"Tags"}),e.jsx(F,{values:d,setValues:y,placeholder:"Add tag..."})]}),e.jsxs("div",{className:"mt-2 d-flex justify-content-end",children:[e.jsx(P.LinkContainer,{to:t?"/Discuss/"+t:"/Discuss",children:e.jsx(a,{size:"sm",type:"button",variant:"secondary",disabled:p,children:"Cancel"})}),t?e.jsxs(e.Fragment,{children:[e.jsx(a,{size:"sm",variant:"secondary",className:"ms-2",type:"button",onClick:()=>b(!0),disabled:p,children:"Delete"}),e.jsx(a,{size:"sm",variant:"primary",className:"ms-2",type:"button",onClick:v,disabled:D,children:"Save changes"})]}):e.jsx(a,{size:"sm",className:"ms-2",variant:"primary",type:"button",onClick:v,disabled:D,children:"Post question"})]})]})]})};export{me as default};
