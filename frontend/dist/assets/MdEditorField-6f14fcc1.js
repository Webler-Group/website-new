import{r as h,u as v,j as e,c as w,B as y,aH as F,aI as R,ad as C,aJ as G,am as T,i as $}from"./index-2b7f2a82.js";import{P as E,M as P}from"./PostTextareaControl-0410de83.js";import{P as k}from"./PostAttachmentSelect-b1903eaf.js";const b=h.forwardRef(({bsPrefix:c,size:d,vertical:a=!1,className:r,role:o="group",as:u="div",...s},f)=>{const t=v(c,"btn-group");let m=t;return a&&(m=`${t}-vertical`),e.jsx(u,{...s,ref:f,role:o,className:w(r,m,d&&`${t}-${d}`)})});b.displayName="ButtonGroup";const O=b,A=()=>{},B=h.forwardRef(({bsPrefix:c,name:d,className:a,checked:r,type:o,onChange:u,value:s,disabled:f,id:t,inputRef:m,...g},n)=>(c=v(c,"btn-check"),e.jsxs(e.Fragment,{children:[e.jsx("input",{className:c,name:d,type:o,value:s,ref:m,autoComplete:"off",checked:!!r,disabled:!!f,onChange:u||A,id:t}),e.jsx(y,{...g,ref:n,className:w(a,f&&"disabled"),type:void 0,role:void 0,as:"label",htmlFor:t})]})));B.displayName="ToggleButton";const x=B,S=h.forwardRef((c,d)=>{const{children:a,type:r="radio",name:o,value:u,onChange:s,vertical:f=!1,...t}=F(c,{value:"onChange"}),m=()=>u==null?[]:[].concat(u),g=(n,l)=>{if(!s)return;const i=m(),p=i.indexOf(n)!==-1;if(r==="radio"){p||s(n,l);return}s(p?i.filter(j=>j!==n):[...i,n],l)};return r!=="radio"||o||R(!1),e.jsx(O,{...t,ref:d,vertical:f,children:C(a,n=>{const l=m(),{value:i,onChange:p}=n.props,j=N=>g(i,N);return h.cloneElement(n,{type:r,name:n.name||o,checked:l.indexOf(i)!==-1,onChange:G(p,j)})})})}),q=Object.assign(S,{Button:x}),L=[/^https?:\/\/.*/i,/^\/.*/],I=({row:c,placeHolder:d,text:a,setText:r,maxCharacters:o=4096,customPreview:u,onModeChange:s,isPost:f=!0})=>{const[t,m]=h.useState("write"),g=h.useRef(null);h.useEffect(()=>{s==null||s(t)},[t]);const n=l=>{r(i=>(i.trim().length==0||i.endsWith(`
`)?i:i+`
`)+l.join(`
`)+`
`)};return e.jsxs("div",{children:[e.jsx("div",{className:"mb-3",children:e.jsxs(q,{type:"radio",name:"editorMode",value:t,onChange:l=>m(l),children:[e.jsx(x,{id:"write-btn",value:"write",variant:"outline-primary",children:"Write"}),e.jsx(x,{id:"preview-btn",value:"preview",variant:"outline-primary",children:"Preview"})]})}),t==="write"&&e.jsx(T,{className:"mb-3",children:f?e.jsxs(e.Fragment,{children:[e.jsx(E,{ref:g,rows:c,placeholder:d,value:a,setValue:r,required:!0,maxLength:o}),e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsxs("div",{className:"mt-2 text-muted small",children:[a.length,"/",o," characters"]}),e.jsx(k,{onSubmit:n})]})]}):e.jsxs(e.Fragment,{children:[e.jsx($,{ref:g,as:"textarea",rows:c,placeholder:d,value:a,onChange:l=>r(l.target.value),required:!0,maxLength:o}),e.jsx("div",{className:"d-flex justify-content-between",children:e.jsxs("div",{className:"mt-2 text-muted small",children:[a.length,"/",o," characters"]})})]})}),t==="preview"&&(u??e.jsx("div",{className:"p-2 border rounded bg-light",children:e.jsx(P,{content:a,allowedUrls:L})}))]})};export{O as B,I as M,x as T,L as a};
