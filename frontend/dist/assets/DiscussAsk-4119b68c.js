import{g as N,d as Q,r,j as e}from"./index-c193dc40.js";import{I as F}from"./InputTags-0acc8362.js";import{r as P}from"./index-99a242c6.js";import{P as z}from"./PostTextareaControl-56ef6c20.js";import{R as A}from"./RequestResultAlert-5538ea88.js";import{M as o}from"./Modal-261a0993.js";import{B as a}from"./Button-b8db3fe4.js";import{a as x,b as j}from"./Form-19731f2f.js";import{F as M}from"./FormControl-cc700203.js";import"./index.esm-54ce3fd1.js";import"./iconBase-11f2ad60.js";import"./Badge-8491b435.js";import"./ThemeProvider-ec2a0fef.js";import"./index-3b750fb9.js";import"./UserSearch-025b778c.js";import"./ProfileAvatar-bb4fbb5b.js";import"./useMergedRefs-2ac3001c.js";import"./Nav-f0da06cf.js";import"./DataKey-e12315fd.js";import"./NavContext-d33865e3.js";import"./Anchor-22c8f756.js";import"./Alert-e497ba45.js";import"./CloseButton-710dc957.js";import"./divWithClassName-a88e1404.js";import"./createWithBsPrefix-6b62a92d.js";import"./useWindow-822d8a97.js";import"./AbstractModalHeader-72c903dd.js";import"./Col-6d72f785.js";const me=({questionId:t})=>{const{sendJsonRequest:n}=N(),u=Q(),[l,f]=r.useState(""),[c,g]=r.useState(""),[d,y]=r.useState([]),[p,i]=r.useState(!1),[w,m]=r.useState(),[C,b]=r.useState(!1);r.useEffect(()=>{t&&k()},[t]);const k=async()=>{i(!0);const s=await n("/Discussion/GetQuestion","POST",{questionId:t});s&&s.question&&(f(s.question.title),g(s.question.message),y(s.question.tags)),i(!1)},v=async()=>{i(!0),m(void 0),t?await S():await T(),i(!1)},T=async()=>{const s=await n("/Discussion/CreateQuestion","POST",{title:l,message:c,tags:d});s&&s.question?u("/Discuss/"+s.question.id):m(s.error)},S=async()=>{const s=await n("/Discussion/EditQuestion","PUT",{questionId:t,title:l,message:c,tags:d});s&&s.success?u("/Discuss/"+t):m(s.error)},h=()=>{b(!1)},E=async()=>{i(!0);const s=await n("/Discussion/DeleteQuestion","DELETE",{questionId:t});s&&s.success?(h(),u("/Discuss?filter=3")):m(s!=null&&s.error?s.error.message:s.message),i(!1)};let D=p||l.trim().length==0||c.trim().length==0;return e.jsxs(e.Fragment,{children:[e.jsxs(o,{show:C,onHide:h,centered:!0,children:[e.jsx(o.Header,{closeButton:!0,children:e.jsx(o.Title,{children:"Are you sure?"})}),e.jsx(o.Body,{children:"Your question will be permanently deleted."}),e.jsxs(o.Footer,{children:[e.jsx(a,{variant:"secondary",onClick:h,children:"Cancel"}),e.jsx(a,{variant:"danger",onClick:E,children:"Delete"})]})]}),t===null&&e.jsx("h2",{className:"mb-4",children:"Ask the community a question"}),e.jsxs("div",{className:"small",children:[e.jsx(A,{errors:w}),e.jsxs(x,{children:[e.jsx(j,{children:"Your question"}),e.jsx(M,{size:"sm",placeholder:"What would you like to know?",type:"text",required:!0,value:l,onChange:s=>f(s.target.value)}),e.jsx("p",{className:"text-secondary",children:"Tip: write as if asking a friend, being as specific as possible"})]}),e.jsxs(x,{children:[e.jsx(j,{children:"Description"}),e.jsx(z,{size:"sm",placeholder:"Include as much detail as possible to get the most relevant answers.",rows:10,maxLength:4096,required:!0,value:c,setValue:g})]}),e.jsxs(x,{children:[e.jsx(j,{children:"Tags"}),e.jsx(F,{values:d,setValues:y,placeholder:"Add tag..."})]}),e.jsxs("div",{className:"mt-2 d-flex justify-content-end",children:[e.jsx(P.LinkContainer,{to:t?"/Discuss/"+t:"/Discuss",children:e.jsx(a,{size:"sm",type:"button",variant:"secondary",disabled:p,children:"Cancel"})}),t?e.jsxs(e.Fragment,{children:[e.jsx(a,{size:"sm",variant:"secondary",className:"ms-2",type:"button",onClick:()=>b(!0),disabled:p,children:"Delete"}),e.jsx(a,{size:"sm",variant:"primary",className:"ms-2",type:"button",onClick:v,disabled:D,children:"Save changes"})]}):e.jsx(a,{size:"sm",className:"ms-2",variant:"primary",type:"button",onClick:v,disabled:D,children:"Post question"})]})]})]})};export{me as default};
