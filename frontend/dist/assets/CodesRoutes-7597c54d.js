import{u as q,r as a,j as e,a2 as A,M as B,b as D,ag as U,m as i,F as J,B as F,Z as T,O as W,Q as L,S as K,U as Z,am as G}from"./index-343737ff.js";import{C as E}from"./Code-fea62aa4.js";import{P as V}from"./react-bootstrap-pagination-control.esm-60bcad8d.js";import{Q as X}from"./QuestionPlaceholder-ea41bc06.js";import{l as Y}from"./compilerLanguages-5415cd41.js";const _=({MainPage:u})=>{const{sendJsonRequest:n}=q(),[h,m]=a.useState([]);a.useEffect(()=>{o()},[]);const o=async()=>{const l=await n("/Codes","POST",{page:1,count:10,filter:5,searchQuery:"",userId:null});l&&l.codes&&m(l.codes)};return e.jsxs(e.Fragment,{children:[e.jsxs(A,{children:[" ",e.jsx("title",{children:"Code Playground | Webler Codes"})," ",e.jsx("meta",{name:"description",content:"Experiment with code in multiple programming languages using Webler’s browser-based IDE. No setup required — just create, edit, and run instantly."})," "]}),e.jsx(B,{children:e.jsxs("div",{className:"row mt-2",style:{minHeight:"100vh"},children:[e.jsx("div",{className:"col-12 col-md-8",children:u}),e.jsxs("div",{className:"col-12 col-md-4",children:[e.jsx("h2",{children:"Hot today"}),e.jsx("div",{className:"my-3",children:h.map(l=>e.jsx("div",{className:"mb-2",children:e.jsx(E,{code:l,searchQuery:"",showUserProfile:!1})},l.id))})]})]})})]})},$=()=>{const{sendJsonRequest:u}=q(),{userInfo:n}=D(),[h,m]=a.useState([]),o=10,[l,x]=a.useState(1),[j,Q]=a.useState(0),[R,f]=a.useState(!1),[g,p]=a.useState(1),[I,y]=a.useState("all"),[v,C]=a.useState(""),[N,S]=a.useState(""),[t,c]=U();a.useEffect(()=>{O()},[t]),a.useEffect(()=>{b(1)},[g,N]),a.useEffect(()=>{t.has("page")&&x(Number(t.get("page"))),t.has("filter")&&p(Number(t.get("filter"))),t.has("query")&&(C(t.get("query")),S(t.get("query"))),t.has("language")&&y(t.get("language"))},[]);const b=s=>{l!==s&&(t.set("page",s.toString()),c(t,{replace:!0}),x(s))},P=()=>{const s=v.trim();t.set("query",s),c(t,{replace:!0}),S(s)},O=async()=>{f(!0);const s=t.has("page")?Number(t.get("page")):1,r=t.has("filter")?Number(t.get("filter")):1,M=t.has("query")?t.get("query"):"",k=t.has("language")?t.get("language"):null,d=await u("/Codes","POST",{page:s,count:o,filter:r,searchQuery:M,language:k,userId:n?n.id:null});d&&d.codes&&(m(d.codes),Q(d.count)),f(!1)},z=s=>{const r=Number(s.target.selectedOptions[0].value);t.set("filter",r.toString()),c(t,{replace:!0}),p(r)},H=s=>{const r=s.target.selectedOptions[0].value;r==="all"?t.delete("language"):t.set("language",r),c(t,{replace:!0}),y(r)};let w=[];for(let s=0;s<o;++s)w.push(e.jsx(X,{},s));return e.jsxs("div",{className:"d-flex flex-column",children:[e.jsx("h2",{children:"Codes"}),e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx(i.Label,{htmlFor:"search",className:"visually-hidden",children:"Search codes"}),e.jsx(J,{id:"search",type:"search",size:"sm",placeholder:"Search...",value:v,onChange:s=>C(s.target.value),onKeyDown:s=>{s.key==="Enter"&&(s.preventDefault(),P())}}),e.jsx(F,{size:"sm",onClick:P,children:"Search"})]}),e.jsxs("div",{className:"mt-2 d-sm-flex flex-row-reverse justify-content-between",children:[e.jsx("div",{className:"mb-2 mb-sm-0 d-flex justify-content-end",children:e.jsx(T.LinkContainer,{to:"/Compiler-Playground",children:e.jsx(F,{size:"sm",children:"New code"})})}),e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsx(i.Label,{htmlFor:"filter",className:"visually-hidden",children:"Filter"}),e.jsxs(i.Select,{id:"filter",size:"sm",style:{width:"140px"},value:g,onChange:z,children:[e.jsx("option",{value:"1",children:"Most Recent"}),e.jsx("option",{value:"2",children:"Most Popular"}),n&&e.jsx(e.Fragment,{children:e.jsx("option",{value:"3",children:"My Codes"})})]}),e.jsx(i.Label,{htmlFor:"language",className:"visually-hidden",children:"Language"}),e.jsxs(i.Select,{id:"language",size:"sm",style:{width:"140px"},className:"ms-2",value:I,onChange:H,children:[e.jsx("option",{value:"all",children:"All"},"all"),Object.entries(Y).map(s=>e.jsx("option",{value:s[0],children:s[1].displayName},s[0]))]})]})]}),e.jsx("div",{className:"my-3",children:R?w:j==0?e.jsx("div",{className:"wb-discuss-empty-questions",children:e.jsx("h3",{children:"Nothing to show"})}):h.map(s=>e.jsx("div",{className:"mt-2",children:e.jsx(E,{code:s,searchQuery:N,showUserProfile:g!=3})},s.id))}),e.jsx("div",{className:"my-3",children:e.jsx(V,{page:l,between:3,total:j,limit:o,changePage:b,ellipsis:1})})]})},re=()=>e.jsx(W,{children:e.jsx(L,{element:e.jsx(K,{Header:e.jsx(Z,{variant:"light"}),Footer:e.jsx(G,{})}),children:e.jsx(L,{index:!0,element:e.jsx(_,{MainPage:e.jsx($,{})})})})});export{re as default};
