import{W as D,b2 as J,X as K,r as n,j as e,B as j,u as T,b as U,m as d,F as W,Z as X}from"./index-0ad0b891.js";import{P as Z}from"./react-bootstrap-pagination-control.esm-9393cd82.js";import{l as G,C as H}from"./Code-31b6dc52.js";function C({animation:a,bg:t,bsPrefix:l,size:o,...u}){l=D(l,"placeholder");const[{className:h,...i}]=J(u);return{...i,className:K(h,a?`${l}-${a}`:l,o&&`${l}-${o}`,t&&`bg-${t}`)}}const F=n.forwardRef((a,t)=>{const l=C(a);return e.jsx(j,{...l,ref:t,disabled:!0,tabIndex:-1})});F.displayName="PlaceholderButton";const V=F,L=n.forwardRef(({as:a="span",...t},l)=>{const o=C(t);return e.jsx(a,{...o,ref:l})});L.displayName="Placeholder";const c=Object.assign(L,{Button:V}),Y=()=>e.jsxs("div",{className:"rounded border p-2 mb-2 bg-white d-flex",children:[e.jsxs("div",{className:"flex-grow-1",children:[e.jsx(c,{as:"h3",animation:"glow",children:e.jsx(c,{xs:4})}),e.jsxs(c,{as:"p",animation:"glow",children:[e.jsx(c,{xs:12}),e.jsx(c,{xs:12})]}),e.jsx("div",{className:"d-flex"})]}),e.jsx("div",{className:"d-flex align-items-end",children:e.jsx("div",{className:"ms-2",children:e.jsx(c,{as:"div",animation:"glow",children:e.jsx(c,{xs:12})})})})]}),ae=({codesState:a,setCodesState:t,onCodeClick:l,isCodeSelected:o,showNewCodeBtn:u})=>{const{sendJsonRequest:h}=T(),{userInfo:i}=U(),[B,Q]=n.useState([]),m=10,[p,S]=n.useState(1),[f,$]=n.useState(0),[I,v]=n.useState(!1),[x,R]=n.useState(1),[E,O]=n.useState("all"),[N,z]=n.useState(""),[y,k]=n.useState("");n.useEffect(()=>{a.ready&&A()},[a]),n.useEffect(()=>{P(1)},[x,y]);const P=s=>{p!==s&&(t(r=>({...r,page:s})),S(s))},w=()=>{const s=N.trim();t(r=>({...r,searchQuery:s})),k(s)},A=async()=>{v(!0);const s=await h("/Codes","POST",{page:a.page,count:m,filter:a.filter,searchQuery:a.searchQuery,language:a.language,userId:i?i.id:null});s&&s.codes&&(Q(s.codes),$(s.count)),v(!1)},M=s=>{const r=Number(s.target.selectedOptions[0].value);t(g=>({...g,filter:r})),R(r)},q=s=>{const r=s.target.selectedOptions[0].value;t(g=>({...g,language:r==="all"?null:r})),O(r)};let b=[];for(let s=0;s<m;++s)b.push(e.jsx(Y,{},s));return e.jsxs("div",{children:[e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx(d.Label,{htmlFor:"search",className:"visually-hidden",children:"Search codes"}),e.jsx(W,{id:"search",type:"search",size:"sm",placeholder:"Search...",value:N,onChange:s=>z(s.target.value),onKeyDown:s=>{s.key==="Enter"&&(s.preventDefault(),w())}}),e.jsx(j,{size:"sm",onClick:w,children:"Search"})]}),e.jsxs("div",{className:"mt-2 d-sm-flex flex-row-reverse justify-content-between",children:[u&&e.jsx("div",{className:"mb-2 mb-sm-0 d-flex justify-content-end",children:e.jsx(X.LinkContainer,{to:"/Compiler-Playground",children:e.jsx(j,{size:"sm",children:"New code"})})}),e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsx(d.Label,{htmlFor:"filter",className:"visually-hidden",children:"Filter"}),e.jsxs(d.Select,{id:"filter",size:"sm",style:{width:"140px"},value:x,onChange:M,children:[e.jsx("option",{value:"1",children:"Most Recent"}),e.jsx("option",{value:"2",children:"Most Popular"}),i&&e.jsx(e.Fragment,{children:e.jsx("option",{value:"3",children:"My Codes"})})]}),e.jsx(d.Label,{htmlFor:"language",className:"visually-hidden",children:"Language"}),e.jsxs(d.Select,{id:"language",size:"sm",style:{width:"140px"},className:"ms-2",value:E,onChange:q,children:[e.jsx("option",{value:"all",children:"All"},"all"),Object.entries(G).map(s=>e.jsx("option",{value:s[0],children:s[1].displayName},s[0]))]})]})]}),e.jsx("div",{className:"my-3",children:I?b:f==0?e.jsx("div",{className:"wb-discuss-empty-questions",children:e.jsx("h3",{children:"Nothing to show"})}):B.map(s=>e.jsx("div",{children:e.jsx(H,{code:s,searchQuery:y,showUserProfile:x!=3,onClick:l?()=>l(s.id):void 0,selected:o==null?void 0:o(s.id)})},s.id))}),e.jsx("div",{className:"my-3",children:e.jsx(Z,{page:p,between:3,total:f,limit:m,changePage:P,ellipsis:1})})]})};export{ae as C,Y as Q};
