import{u as G,b5 as q,c as J,r as n,j as e,B as j,d as K,n as T,F as c,g as U,h as H}from"./index-11d2e42e.js";import{P as V}from"./react-bootstrap-pagination-control.esm-f5e252ef.js";import{l as W,C as X}from"./Code-4f0eb453.js";function $({animation:a,bg:r,bsPrefix:l,size:o,...u}){l=G(l,"placeholder");const[{className:h,...d}]=q(u);return{...d,className:J(h,a?`${l}-${a}`:l,o&&`${l}-${o}`,r&&`bg-${r}`)}}const I=n.forwardRef((a,r)=>{const l=$(a);return e.jsx(j,{...l,ref:r,disabled:!0,tabIndex:-1})});I.displayName="PlaceholderButton";const Y=I,R=n.forwardRef(({as:a="span",...r},l)=>{const o=$(r);return e.jsx(a,{...o,ref:l})});R.displayName="Placeholder";const i=Object.assign(R,{Button:Y}),Z=()=>e.jsxs("div",{className:"rounded border p-2 mb-2 bg-white d-flex",children:[e.jsxs("div",{className:"flex-grow-1",children:[e.jsx(i,{as:"h3",animation:"glow",children:e.jsx(i,{xs:4})}),e.jsxs(i,{as:"p",animation:"glow",children:[e.jsx(i,{xs:12}),e.jsx(i,{xs:12})]}),e.jsx("div",{className:"d-flex"})]}),e.jsx("div",{className:"d-flex align-items-end",children:e.jsx("div",{className:"ms-2",children:e.jsx(i,{as:"div",animation:"glow",children:e.jsx(i,{xs:12})})})})]}),ae=({codesState:a,setCodesState:r,onCodeClick:l,isCodeSelected:o,showNewCodeBtn:u})=>{const{sendJsonRequest:h}=K(),{userInfo:d}=T(),[E,O]=n.useState([]),x=10,[p,z]=n.useState(1),[f,k]=n.useState(0),[A,v]=n.useState(!1),[m,y]=n.useState(1),[N,P]=n.useState("all"),[w,b]=n.useState(""),[C,F]=n.useState("");n.useEffect(()=>{a.ready&&M(),y(a.filter),b(a.searchQuery),F(a.searchQuery),P(a.language||"all")},[a]),n.useEffect(()=>{L(1)},[m,N,C]);const L=s=>{p!==s&&(r(t=>({...t,page:s})),z(s))},Q=()=>{const s=w.trim();r(t=>({...t,searchQuery:s})),F(s)},M=async()=>{v(!0);const s=await h("/Codes","POST",{page:a.page,count:x,filter:a.filter,searchQuery:a.searchQuery,language:a.language,userId:d?d.id:null});s&&s.codes&&(O(s.codes),k(s.count)),v(!1)},S=s=>{const t=Number(s.target.selectedOptions[0].value);r(g=>({...g,filter:t})),y(t)},D=s=>{const t=s.target.selectedOptions[0].value;r(g=>({...g,language:t==="all"?null:t})),P(t)};let B=[];for(let s=0;s<x;++s)B.push(e.jsx(Z,{},s));return e.jsxs("div",{children:[e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx(c.Label,{htmlFor:"search",className:"visually-hidden",children:"Search codes"}),e.jsx(U,{id:"search",type:"search",size:"sm",placeholder:"Search...",value:w,onChange:s=>b(s.target.value),onKeyDown:s=>{s.key==="Enter"&&(s.preventDefault(),Q())}}),e.jsx(j,{size:"sm",onClick:Q,children:"Search"})]}),e.jsxs("div",{className:"mt-2 d-sm-flex flex-row-reverse justify-content-between",children:[u&&e.jsx("div",{className:"mb-2 mb-sm-0 d-flex justify-content-end",children:e.jsx(H.LinkContainer,{to:"/Compiler-Playground",children:e.jsx(j,{size:"sm",children:"New code"})})}),e.jsxs("div",{className:"d-flex gap-2 justify-content-between",children:[e.jsxs(c.Group,{children:[e.jsx(c.Label,{htmlFor:"filter",className:"visually-hidden",children:"Filter"}),e.jsxs(c.Select,{id:"filter",size:"sm",style:{width:"140px"},value:m,onChange:S,children:[e.jsx("option",{value:"1",children:"Most Recent"}),e.jsx("option",{value:"2",children:"Most Popular"}),d&&e.jsx(e.Fragment,{children:e.jsx("option",{value:"3",children:"My Codes"})})]})]}),e.jsxs(c.Group,{children:[e.jsx(c.Label,{htmlFor:"language",className:"visually-hidden",children:"Language"}),e.jsxs(c.Select,{id:"language",size:"sm",style:{width:"140px"},value:N,onChange:D,children:[e.jsx("option",{value:"all",children:"All"},"all"),Object.entries(W).map(s=>e.jsx("option",{value:s[0],children:s[1].displayName},s[0]))]})]})]})]}),e.jsx("div",{className:"my-3",children:A?B:f==0?e.jsx("div",{className:"wb-empty-list",children:e.jsx("h3",{children:"Nothing to show"})}):E.map(s=>e.jsx("div",{children:e.jsx(X,{code:s,searchQuery:C,showUserProfile:m!=3,onClick:l?()=>l(s.id):void 0,selected:o==null?void 0:o(s.id)})},s.id))}),e.jsx("div",{className:"my-3",children:e.jsx(V,{page:p,between:3,total:f,limit:x,changePage:L,ellipsis:1})})]})};export{ae as C,Z as Q};
