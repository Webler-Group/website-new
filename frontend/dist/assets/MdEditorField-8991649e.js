import{r as v,u as N,j as e,c as k,B as M,aK as T,aL as E,ag as $,aM as I,ap as P,i as S}from"./index-1922281e.js";import{P as O,M as A}from"./PostTextareaControl-35f6c4b8.js";import{P as W}from"./PostAttachmentSelect-f9fc497b.js";const y=v.forwardRef(({bsPrefix:d,size:u,vertical:o=!1,className:a,role:i="group",as:m="div",...l},f)=>{const s=N(d,"btn-group");let h=s;return o&&(h=`${s}-vertical`),e.jsx(m,{...l,ref:f,role:i,className:k(a,h,u&&`${s}-${u}`)})});y.displayName="ButtonGroup";const q=y,D=()=>{},C=v.forwardRef(({bsPrefix:d,name:u,className:o,checked:a,type:i,onChange:m,value:l,disabled:f,id:s,inputRef:h,...g},r)=>(d=N(d,"btn-check"),e.jsxs(e.Fragment,{children:[e.jsx("input",{className:d,name:u,type:i,value:l,ref:h,autoComplete:"off",checked:!!a,disabled:!!f,onChange:m||D,id:s}),e.jsx(M,{...g,ref:r,className:k(o,f&&"disabled"),type:void 0,role:void 0,as:"label",htmlFor:s})]})));C.displayName="ToggleButton";const B=C,K=v.forwardRef((d,u)=>{const{children:o,type:a="radio",name:i,value:m,onChange:l,vertical:f=!1,...s}=T(d,{value:"onChange"}),h=()=>m==null?[]:[].concat(m),g=(r,p)=>{if(!l)return;const t=h(),x=t.indexOf(r)!==-1;if(a==="radio"){x||l(r,p);return}l(x?t.filter(n=>n!==r):[...t,r],p)};return a!=="radio"||i||E(!1),e.jsx(q,{...s,ref:u,vertical:f,children:$(o,r=>{const p=h(),{value:t,onChange:x}=r.props,n=c=>g(t,c);return v.cloneElement(r,{type:a,name:r.name||i,checked:p.indexOf(t)!==-1,onChange:I(x,n)})})})}),U=Object.assign(K,{Button:B}),_=[/^https?:\/\/.*/i,/^\/.*/],J=({row:d,placeHolder:u,text:o,setText:a,maxCharacters:i=4096,customPreview:m,onModeChange:l,isPost:f=!0})=>{const[s,h]=v.useState("write"),g=v.useRef(null);v.useEffect(()=>{l==null||l(s)},[s]);const r=n=>{a(c=>(c.trim().length==0||c.endsWith(`
`)?c:c+`
`)+n.join(`
`)+`
`)},p=n=>{const c=n.slice(0,i);a(c)},t=(n,c="")=>{const j=g.current;if(!j)return;const b=j.selectionStart,w=j.selectionEnd,F=o.slice(b,w),R=o.slice(0,b),G=o.slice(w),L=R+n+F+c+G;p(L),setTimeout(()=>{j.focus(),j.setSelectionRange(b+n.length,w+n.length)},50)},x=[{icon:"B",title:"Bold",action:()=>t("**","**")},{icon:"I",title:"Italic",action:()=>t("_","_")},{icon:"S",title:"Small",action:()=>t("~~","~~")},{icon:"M",title:"Mark",action:()=>t("`","`")},{icon:"H3",title:"Heading",action:()=>t("### ","")},{icon:"LINK",title:"Link",action:()=>t("[text](",")")},{icon:"IMG",title:"Image",action:()=>t("![alt text](",")")},{icon:"-",title:"List",action:()=>t("- ","")},{icon:"</>",title:"Code Block",action:()=>t("```bash\n","\n```")},{icon:">",title:"Quote",action:()=>t("> ","")},{icon:"1.",title:"Numbered List",action:()=>t("1. ","")},{icon:"|",title:"Divider",action:()=>t("---")}];return e.jsxs("div",{children:[e.jsx("div",{className:"d-flex overflow-auto mb-2 p-2 bg-light rounded border gap-2",children:x.map((n,c)=>e.jsx("button",{className:"btn btn-sm btn-outline-secondary flex-shrink-0",title:n.title,onClick:j=>{j.preventDefault(),n.action()},style:{minWidth:"40px"},children:n.icon},c))}),e.jsx("div",{className:"mb-3",children:e.jsxs(U,{type:"radio",name:"editorMode",value:s,onChange:n=>h(n),children:[e.jsx(B,{id:"write-btn",value:"write",variant:"outline-primary",children:"Write"}),e.jsx(B,{id:"preview-btn",value:"preview",variant:"outline-primary",children:"Preview"})]})}),s==="write"&&e.jsx(P,{className:"mb-3",children:f?e.jsxs(e.Fragment,{children:[e.jsx(O,{ref:g,rows:d,placeholder:u,value:o,setValue:a,required:!0,maxLength:i}),e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsxs("div",{className:"mt-2 text-muted small",children:[o.length,"/",i," characters"]}),e.jsx(W,{onSubmit:r})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(S,{ref:g,as:"textarea",rows:d,placeholder:u,value:o,onChange:n=>a(n.target.value),required:!0,maxLength:i}),e.jsx("div",{className:"d-flex justify-content-between",children:e.jsxs("div",{className:"mt-2 text-muted small",children:[o.length,"/",i," characters"]})})]})}),s==="preview"&&(m??e.jsx("div",{className:"p-2 border rounded bg-light",children:e.jsx(A,{content:o,allowedUrls:_})}))]})};export{q as B,J as M,B as T,_ as a};
