import{r as h,j as e,h as w,g as B,i as P}from"./index-b2f3d98e.js";import{z as $,k as T,i as R}from"./index.esm-4a619d62.js";import{F}from"./index.esm-cb18ecd9.js";import{t as S}from"./StringUtils-91be14c5.js";import{P as E}from"./PageTitle-83c92925.js";import{C as U}from"./Container-aded6eb3.js";import{u as I,c as v}from"./ThemeProvider-c318c21f.js";import{m as O,C as _}from"./Col-1c3a04d0.js";import{R as z}from"./Row-6d073b7a.js";import{C as l}from"./Card-f2e16d11.js";import{B as f}from"./Badge-d192c51b.js";import{B as b}from"./Button-a8db19a8.js";import"./iconBase-7a454df3.js";import"./createWithBsPrefix-c6deafcc.js";import"./divWithClassName-9b80bbe4.js";import"./CardHeaderContext-82a24767.js";const k=1e3;function A(n,o,r){const t=(n-o)/(r-o)*100;return Math.round(t*k)/k}function N({min:n,now:o,max:r,label:t,visuallyHidden:p,striped:c,animated:d,className:g,style:j,variant:u,bsPrefix:m,...a},s){return e.jsx("div",{ref:s,...a,role:"progressbar",className:v(g,`${m}-bar`,{[`bg-${u}`]:u,[`${m}-bar-animated`]:d,[`${m}-bar-striped`]:d||c}),style:{width:`${A(o,n,r)}%`,...j},"aria-valuenow":o,"aria-valuemin":n,"aria-valuemax":r,children:p?e.jsx("span",{className:"visually-hidden",children:t}):t})}const L=h.forwardRef(({isChild:n=!1,...o},r)=>{const t={min:0,max:100,animated:!1,visuallyHidden:!1,striped:!1,...o};if(t.bsPrefix=I(t.bsPrefix,"progress"),n)return N(t,r);const{min:p,now:c,max:d,label:g,visuallyHidden:j,striped:u,animated:m,bsPrefix:a,variant:s,className:i,children:x,...C}=t;return e.jsx("div",{ref:r,...C,className:v(i,a),children:x?O(x,y=>h.cloneElement(y,{isChild:!0})):N({min:p,now:c,max:d,label:g,visuallyHidden:j,striped:u,animated:m,bsPrefix:a,variant:s},r)})});L.displayName="ProgressBar";const G=L,ne=()=>{const{courseCode:n}=w(),{sendJsonRequest:o}=B(),[r,t]=h.useState(null),[p,c]=h.useState(!0),[d,g]=h.useState("Webler Codes");E(d),h.useEffect(()=>{j()},[n]);const j=async()=>{c(!0);const s=await o("/Courses/GetCourse","POST",{courseCode:n,includeLessons:!0});s&&s.course&&(t(s.course),g("Courses - "+s.course.title+" | Webler Codes")),c(!1)},u=()=>{if(!r||!r.lessons.length)return 0;const s=r.lessons.filter(i=>i.completed).length;return Math.round(s/r.lessons.length*100)};let a=(()=>{let s=null;if(r){const i=r.lessons.filter(x=>x.unlocked).sort((x,C)=>C.index-x.index);i.length&&(s=i[0])}return s})();return e.jsx(U,{children:e.jsx("div",{className:"wb-courses-main pt-2",children:p?e.jsx("p",{children:"Loading..."}):r?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"d-flex gap-2 py-2",children:[e.jsx(P,{to:"/Courses",children:"Courses"}),e.jsx("span",{children:"â€º"}),e.jsx("span",{children:S(r.title,20)})]}),e.jsx("h3",{children:r.title}),e.jsx("p",{className:"wb-courses-course__description",children:r.description}),a&&e.jsx(l,{className:"mt-4 shadow-sm",children:e.jsxs(l.Body,{children:[e.jsx(l.Title,{children:"Continue your progress"}),e.jsxs(l.Text,{children:["You can continue with lesson ",e.jsx("strong",{children:a.title}),"."]}),e.jsx(P,{to:`/Courses/${r.code}/Lesson/${a.id}`,children:e.jsx(b,{variant:"primary",children:"Go to Lesson"})})]})}),e.jsxs("div",{className:"mt-4",children:[e.jsx("h5",{children:"Progress"}),e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx(G,{now:u(),className:"flex-grow-1 me-2"}),e.jsxs("span",{children:[r.lessons.filter(s=>s.completed).length," / ",r.lessons.length]})]})]}),e.jsxs("div",{children:[e.jsx("h5",{children:"Lessons"}),e.jsx(z,{children:r.lessons.map(s=>{const i=s.unlocked&&!s.completed;return e.jsx(_,{md:6,lg:4,className:"mb-3",children:e.jsx(l,{className:`h-100 shadow-sm ${s.unlocked?"":"bg-light text-muted"}`,style:{cursor:s.unlocked?"pointer":"not-allowed"},children:e.jsxs(l.Body,{children:[e.jsx(l.Title,{children:s.title}),e.jsxs(l.Text,{children:["Slides: ",s.nodeCount]}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[s.unlocked&&s.completed&&e.jsxs(f,{bg:"success",children:[e.jsx(F,{}),"Completed"]}),i&&e.jsxs(f,{bg:"info",children:[e.jsx($,{}),"In Progress"]}),s.unlocked&&!s.completed&&!i&&e.jsxs(f,{bg:"light",text:"dark",children:[e.jsx(T,{}),"Available"]}),!s.unlocked&&e.jsxs(f,{bg:"secondary",children:[e.jsx(R,{}),"Locked"]}),e.jsxs("small",{children:["#",s.index]})]}),s.unlocked&&e.jsx(P,{to:`/Courses/${r.code}/Lesson/${s.id}`,children:e.jsx(b,{size:"sm",variant:"outline-primary",children:"Open"})})]})})},s.id)})})]})]}):e.jsx("p",{children:"Course not found."})})})};export{ne as default};
